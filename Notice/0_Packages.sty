%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%% Chargement package %%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[utf8]{inputenc}
%%%% Choix de la police
%\usepackage{ebgaramond}
%%%%%
\usepackage[T1]{fontenc}
\usepackage{geometry}
\geometry{a4paper}
\usepackage[french]{babel} 
\usepackage{graphicx}
\usepackage{amsmath,amsthm,amssymb,color,stmaryrd,bbm,bm, mathrsfs,amsbsy}
\usepackage[all]{xy} 
\usepackage{multirow}
\usepackage[svgnames]{xcolor}
\usepackage{enumitem} 
\usepackage{frcursive}
\usepackage{array}
\usepackage{subcaption}
\usepackage{placeins}
\usepackage[options, squaren]{SIunits}
\usepackage{tabularx}
\usepackage{extarrows}
\usepackage{adjustbox}
\usepackage{tikz}
\usepackage{imakeidx}
\usepackage{listings}

\usepackage{xr}%Permet de faire référence à une équation dans un autre fichier .tex
\usepackage{xr-hyper}




\definecolor{mygray}{gray}{0.95}
\definecolor{spyderviolet}{RGB}{153,50,204}
\lstset{
  language=Python,
  aboveskip=3mm,
  belowskip=-2mm,
  backgroundcolor=\color{mygray},
  basicstyle=\footnotesize,
  breakatwhitespace=false,
  breaklines=true,
  captionpos=b,
  escapeinside={\%*}{*)},
  extendedchars=true,
  framexleftmargin=16pt,
  framextopmargin=3pt,
  framexbottommargin=6pt,
  frame=tb,
  keepspaces=true,
  literate=
  {é}{{\'e}}1
  {è}{{\`{e}}}1
  {ê}{{\^{e}}}1
  {ë}{{\¨{e}}}1
  {É}{{\'{E}}}1
  {Ê}{{\^{E}}}1
  {û}{{\^{u}}}1
  {ù}{{\`{u}}}1
  {ü}{{\¨{u}}}1
  {â}{{\^{a}}}1
  {à}{{\`{a}}}1
  {á}{{\'{a}}}1
  {ã}{{\~{a}}}1
  {Á}{{\'{A}}}1
  {Â}{{\^{A}}}1
  {Ã}{{\~{A}}}1
  {ç}{{\c{c}}}1
  {Ç}{{\c{C}}}1
  {õ}{{\~{o}}}1
  {ó}{{\'{o}}}1
  {ô}{{\^{o}}}1
  {Õ}{{\~{O}}}1
  {Ó}{{\'{O}}}1
  {Ô}{{\^{O}}}1
  {î}{{\^{i}}}1
  {Î}{{\^{I}}}1
  {í}{{\'{i}}}1
  {Í}{{\~{Í}}}1,
  emph={self},
  emphstyle=\color{Red},
  emph={[2]True, False, len, range, None, zip, sum, min, max, int, float, list, enumerate, str},
  emphstyle={[2]\color{Orange}},
  emph={[3]import, class, def, return, None, from, as, yield, for, while, if, elif, else, try, except, finally, with, lambda, in},
  emphstyle={[3]\color{spyderviolet}},
  numbers=left,
  numbersep=10pt,
  numberstyle=\tiny\color{black},
  rulecolor=\color{black},
  showspaces=false,
  showstringspaces=false,
  showtabs=false,
  stepnumber=1,
  stringstyle=\color{green},
  commentstyle=\color{gray},
  tabsize=4,
  alsoletter={_},
  alsoother={()},
  morecomment=[s][{\color{cyan}}]{def }{(},
}





%%%%%% Package for fancy appendix %%%%%%
%\usepackage[toc]{appendix}
\usepackage{appendix}

%%%%% Package for fancy bibliography %%%%%%
\usepackage[sort&compress]{natbib}
\usepackage{shorttoc}
\bibliographystyle{abbrvnat}
\setcitestyle{authoryear,numbers,square}

%%%%% Package pour les hyperliens %%%%%%
\usepackage[colorlinks=true, pagebackref=true, linkcolor=Red, citecolor=blue]{hyperref}
\renewcommand*{\backref}[1]{}
\renewcommand*{\backrefalt}[4]{[{\normalsize%
    \ifcase #1 Not cited.%
  \or Cit\'e page~#2.%
  \else Cit\'e pages #2.%
    \fi%
    }]}
    
%%%%%% Styles chapitres %%%%%%
\usepackage[Bjornstrup]{fncychap}
\usetikzlibrary{shapes.misc}
\tikzset{cross/.style={cross out, draw=black, fill=none, minimum size=2*(#1-\pgflinewidth), inner sep=0pt, outer sep=0pt}, cross/.default={2pt}}


%%%%% Package for fancy header %%%%%%
\usepackage{fancyhdr}

%pour les en-têtes et pieds de pages
\setlength{\headheight}{40pt}


%%%%%% Différents style %%%%%%

%%%%%% style emptyp %%%%%% 
\fancypagestyle{emptyp}{%
\fancyhf{}%on vide l'en-tête
\fancyfoot[C]{}%
\renewcommand{\headrulewidth}{0pt}%trait horizontal pour l'en-tête
\renewcommand{\footrulewidth}{0.4pt}%trait horizontal pour le pied de page
}

%%%%% style front %%%%% 
\fancypagestyle{front}{%
\fancyhf{}%on vide l'en-tête
\fancyfoot[C]{page \thepage}%
\renewcommand{\headrulewidth}{0pt}%trait horizontal pour l'en-tête
\renewcommand{\footrulewidth}{0.4pt}%trait horizontal pour le pied de page
}
%%%%% style main %%%%%
\fancypagestyle{main}{%
\fancyhf{}
\renewcommand{\chaptermark}[1]{\markboth{\chaptername\ \thechapter.\ ##1}{}}% redéfinition pour avoir ici les titres des chapitres des sections en minuscules
\renewcommand{\sectionmark}[1]{\markright{\thesection\ ##1}}
\fancyhead[c]{}
\fancyhead[LO]{\large{\nouppercase{\leftmark}}}
\fancyhead[RE]{\large{\nouppercase{\rightmark}}}
\setlength{\headheight}{40pt}
\fancyfoot[C]{page \thepage}%
\renewcommand{\headrulewidth}{0.4pt}%trait horizontal pour l'en-tête
\renewcommand{\footrulewidth}{0.4pt}%trait horizontal pour le pied de pages
}
%%%%%% style back %%%%%%  
\fancypagestyle{back}{%
\fancyhf{}%on vide l'en-tête
\fancyfoot[C]{page \thepage}%
\renewcommand{\headrulewidth}{0pt}%trait horizontal pour l'en-tête
\renewcommand{\footrulewidth}{0.4pt}%trait horizontal pour le pied de pages
}     

%%%%%% style part %%%%%%
\usepackage{titlesec} 
\titleclass{\part}{top} % make part like a chapter
\titleformat{\part}
[display]
{\centering\normalfont\Huge\bfseries}
{\titlerule[5pt]\vspace{3pt}\titlerule[2pt]\vspace{3pt}\MakeUppercase{\partname}}
{0pt}
{\titlerule[2pt]\vspace{1pc}\huge\MakeUppercase}
%
\titlespacing*{\part}{0pt}{0pt}{20pt}